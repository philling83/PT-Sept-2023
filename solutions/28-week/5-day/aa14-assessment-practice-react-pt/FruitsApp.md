# Fruits App

The following instructions will guide through the various phases of the React
assessment.

## Tests for your assessment

This assessment contains tests to help you complete the various phases. When run,
they will report to you when expectations of _functionality_ are met. It is
still up to you to make sure that your code does not produce errors in the
console and is properly formatted.

The tests are grouped by phase. Use these test groupings to know when each phase
is complete from a functionality perspective.

The tests are located in **src/\_\_tests\_\_**. **Do not modify the files in
that directory.**

## Recommendations and requirements

Review your app's output in the terminal or browser console frequently to make
sure that you do not have any warnings about things like unused variables.

After each phase, the application should render in the browser without errors.

Do not move any files in the **src/components** folder. The tests expect the
existence of those files.

When the instructions say to do something like "Use the `XXX` component in the
`render` method", recognize that you may need to import something (like the
`XXX` component) before that will work. In most cases, you will **NOT** be
instructed to import anything. Use your knowledge of JavaScript modules to
figure that out on your own.

Similarly, the instructions will typically not tell you how to structure your
components, only what they must contain. In some instances, e.g., you may find
it helpful to wrap multiple elements inside a `div` with an appropriate class
name. Such enhancements, however, will not be assessed.

## Phase 0: Getting the app running

The starter contains an application generated by Vite using the
`appacademy/aa-react18-vite-template` template and providing `react-router-dom`.
It contains some styling for you in the **index.css** file for CSS classes that
you will apply during the steps so that things are not default browser layout.

It also contains the tests for the components that you will create.

The React application is already wrapped in the `FavFruitProvider` (from
**context/FavFruitContext.jsx**) in **src/main.jsx**.

After cloning, run `npm install` to install the dependencies.

You can run your tests with `npm test`. Follow the on-screen instructions to
quit the test runner. If you want to run your tests only once, use the following
command:

```plaintext
npm test -- --run
```

To run the tests for your current step, run `npm test <file>`, where `<file>` is
the test file you're working on.

Here's the list of test files to run individually:

* `npm test 1-Routes`
* `npm test 2-Navigation`
* `npm test 3-FruitsIndex`
* `npm test 4-FruitShow`
* `npm test 5-FruitForm`
* `npm test 6-FavoriteFruit`
* `npm test 7-SetFavoriteFruit`

**Note:** With one exception, you can complete the phases in any order, so if
you get stuck on one particular phase, feel free to move on to another phase.
You can then return to the troubling phase later with fresh eyes. **The one
exception:** The last test of every phase (and the last two of `FruitForm`) is
an integration test that ensures the current component is configured correctly
with the routes in **App.jsx**. This is why `1-Routes`--which sets up
**App.jsx**--is the recommended starting point.

Type `q` or `<Control>+c` to stop the test runner.

You can also run all the tests at once by simply running `npm test`.

To run the application in a browser, use the command `npm run dev`. Type `o` in
the terminal where the application is running to open it in a browser.
Alternatively, you can open a browser window yourself and navigate to
[http://localhost:5173/] (by clicking on that link, for example).

**Warning:** Make sure that the app opens in a Google Chrome browser. If you
don't have Chrome as your default browser, it will open Microsoft Internet
Explorer. For the purposes of this class, Chrome is recommended.

## Phase 1: Routes

In this phase, you will create the following routes in the `App` component:

| Route path         | Component/Text          |
| ------------------ | ----------------------- |
| `/`                | `FruitsIndex`           |
| `/fruits/:fruitId` | `FruitShow`             |
| `/fruits/new`      | `FruitForm`             |
| `/fav-fruit`       | `FavoriteFruit`         |
| `/set-fav-fruit`   | `SetFavoriteFruit`      |
| all other paths    | "Page Not Found" (text) |

Additionally, you should make sure that the `Navigation` component renders on
every page.

**NOTE:** The tests for this Phase mock the other testable components that you
have to write so that you can pass these tests independently of your other
implementations. As a consequence of this independence, **none of the tested
routes can depend on `Outlet`s that appear in those mocked components.** An
`Outlet` that you put in your `Navigation` component, e.g., might render a page
successfully in the browser, but it will fail these tests because the
`Navigation` mock component that the tests use does not have an `Outlet`.

**Tl;DR: Any `Outlet`s needed by your routes should appear in __App.jsx__.**

The 5 `Fruit` components should all take the array of `fruits` imported from
**src/mockData/fruits.json** as a prop named `fruits`.

To test this phase, run `npm test 1-Routes`.

## Phase 2: Navigation

The `Navigation` component should already be rendered inside the `App` component
from Phase 1. Now it's time to give it some content, namely, some navigation
links.

To test this phase, run `npm test 2-Navigation`.

Inside of the `Navigation` component, render the following four navigation
links:

| Name               | Path             |
| ------------------ | ---------------- |
| Home               | `/`              |
| Enter a Fruit      | `/fruits/new`    |
| Favorite Fruit     | `/fav-fruit`     |
| Set Favorite Fruit | `/set-fav-fruit` |

Use the value in the "Name" column above as the visual content of your
navigation link.

(**Tip:** Consider nesting these links inside a `nav` element.)

**You must use the `NavLink` component from `react-router-dom`.**

## Phase 3: FruitsIndex

The `FruitsIndex` component should already be rendered inside the `App`
component from Phase 1. (Remember that it takes a `fruits` prop.) Now it's time
to give it some content, namely, links to fruit pages for all the fruits in a
given list of fruits.

To test this phase, run `npm test 3-FruitsIndex`.

Inside of the `FruitsIndex` component, render an `h2` element with exactly the
text, "Fruits Index". Then render links to the fruit show pages for all the
fruits passed in as props. Each link should be formatted as `/fruits/:fruitId`
with `:fruitId` replaced with a fruit's `id`. The visual content of each link
should be that fruit's `name`.

**You must use the `Link` component from `react-router-dom`.**

## Phase 4: FruitShow

The `FruitShow` component should already be rendered inside the `App` component
from Phase 1. (Remember that it takes a `fruits` prop.) Now it's time to give it
some content, namely, the details of the fruit whose `id` corresponds to the
`:fruitId` in the `/fruits/:fruitId` route.

To test this phase, run `npm test 4-FruitShow`.

In the list of fruits in the mock data file, **src/mockData/fruits.json**, each
fruit has an `id`. Inside of the `FruitShow` component, display the fruit
information for the fruit with the `id` that matches the `:fruitId` in the URL
path.

Render an `h2` element with the fruit's name as the text. Outside of the `h2`
element, render the color, the sweetness, and whether or not the fruit has any
seeds. Use any sort of HTML text elements you want to display this information.
Note that the sweetness should be rendered using this format: `Sweetness: 6`.

Your `FruitShow` should update as the URL changes.

## Phase 5: FruitForm

The `FruitForm` component should already be rendered inside the `App` component
from Phase 1. (Remember that it takes a `fruits` prop.) It is also partially
completed for you. In this phase, you will add controlled inputs, validations,
and submission to the existing `FruitForm` component.

To test this phase, run `npm test 5-FruitForm`.

Take a look at the existing `<form>` in the `FruitForm` component. First, **make
the name, sweetness, seeds, and color inputs into controlled inputs.** The name
field should be initialized to an empty string. The sweetness field should be
initialized to 1; the color field, to `orange` (i.e., the **second** color
in the `COLORS` constant variable defined at the top of the component file). The
seeds field should be initialized to "yes" / "Seeds".

Using `useEffect` and `useState`, create the following form validations. Render
the error messages in the `p.errors` elements below the respective inputs. **(In
other words, name errors should appear below the `Name` input/label, and so
on.)**

| Field     | Condition                          | Error Message                        |
| --------- | ---------------------------------- | ------------------------------------ |
| Name      | Less than 3 characters             | "Name must be 3 or more characters"  |
| Name      | More than 20 characters            | "Name must be 20 characters or less" |
| Name      | Uniqueness                         | "Name already exists"                |
| Sweetness | Less than 1 **or** Greater than 10 | "Sweetness must be between 1 and 10" |

**The errors must be handled dynamically and be checked on initial render and
after every change in user input, not during form submission.**

Disable the submit button of the `<form>` with a `disabled` attribute (with a
value of `true`) if the form validations don't pass (i.e., if any error messages
are present).

**When the form is submitted**, print the form values to the console in an
object with the keys `name`, `sweetness`, `color`, and `seeds`. Then navigate
to the home page ("/").

Example of form values properly formatted in an object:

```js
{
  name: "Blueberry",
  sweetness: "7",
  color: "blue",
  seeds: "yes"
}
```

## Phase 6: FavoriteFruit

The `FavoriteFruit` component should already be rendered inside the `App`
component from Phase 1. (Remember that it takes a `fruits` prop.) Now it's time
to give it some content, namely, a link to the show page of the favorite fruit
matching the `favFruitId` extracted form a context.

To test this phase, run `npm test 6-FavoriteFruit`.

Take a look at the context and provider created in
**src/context/FavFruitContext.jsx**. The value of the `FavFruitContext` has a
`favFruitId` that should be matched to an existing fruit. The `FavoriteFruit`
component should render a `Link` to the show page of the favorite fruit
(route must match the pattern `/fruits/:fruitId`). The text of the `Link`
should be the name of the favorite fruit.

**Hint:** You may want to create a custom hook to return the values of the
`FavFruitContext`.

Render an `h2` element with the text, "Favorite Fruit". Then render the `Link`
that directs a user to the favorite fruit's show page (`/fruits/:fruitId`).

## Phase 7: SetFavoriteFruit

In the previous phase, you used the `FavFruitContext`'s `favFruitId` value. In
this phase you will set the `favFruitId` value of the context in the
`SetFavoriteFruit` component. (The `SetFavoriteFruit` component should already
be rendered inside the `App` component from Phase 1. Remember that it takes a
`fruits` prop.)

To test this phase, run `npm test 7-SetFavoriteFruit`.

Much of this component is provided for you. **Do not change the heading text
("Select your Favorite Fruit") or text names of the options (each fruit's name)
as the tests expect these to be present as they are.**

A `select` dropdown has been rendered in the `SetFavoriteFruit` component for
you. Make this a **controlled input** that changes the value of the `favFruitId`
in the `FavFruitContext` using the `setFavFruitId` function in the
`FavFruitContext`. The favorite fruit dropdown menu should select the
appropriate fruit based on the `favFruitId`. For example, if `favFruitId` is
`"1"`, then the favorite fruit selected in the dropdown menu should be `Apple`.

If done correctly, you should see the favorite fruit name in the `FavoriteFruit`
component change when you select a different fruit in the `SetFavoriteFruit`
dropdown menu. (Note that you will have to click the `Favorite Fruit` button to
see the updated fruit link after setting the favorite fruit type.)

## Wrapping up

Make sure that you pass all the tests by running `npm test`. Each test is
weighted individually. To see your score, run `npm run test-with-points`.

[http://localhost:5173/]: http://localhost:5173/
